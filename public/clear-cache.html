<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>COME ON Timer - Cache Clear</title>
<style>
  body { background: #0a0e1a; color: white; font-family: system-ui; display: flex; align-items: center; justify-content: center; min-height: 100vh; margin: 0; }
  .box { text-align: center; max-width: 400px; padding: 40px; }
  h1 { color: #60a5fa; }
  #status { margin: 20px 0; padding: 16px; border-radius: 12px; background: rgba(255,255,255,0.05); white-space: pre-line; }
  a { color: white; text-decoration: none; display: inline-block; margin-top: 20px; padding: 12px 24px; border-radius: 12px; background: #2563eb; font-weight: bold; }
</style>
</head>
<body>
<div class="box">
  <h1>COME ON Timer</h1>
  <p>キャッシュをクリアしています...</p>
  <div id="status">処理中...</div>
  <script>
    async function clearAll() {
      const el = document.getElementById('status');
      let log = '';
      try {
        const regs = await navigator.serviceWorker.getRegistrations();
        for (const r of regs) { await r.unregister(); log += 'Service Worker 解除完了\n'; }
        const keys = await caches.keys();
        for (const k of keys) { await caches.delete(k); log += 'Cache deleted: ' + k + '\n'; }
        localStorage.clear();
        log += 'localStorage クリア完了\n\n✅ 全てクリア完了！';
        el.textContent = log;
      } catch (e) { el.textContent = 'Error: ' + e.message; }
    }
    clearAll();
  </script>
  <a href="/">COME ON Timer を開く →</a>
</div>
</body>
</html>
